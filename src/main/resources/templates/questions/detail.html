<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title th:text="${question.title}"></title>

  <style>
    /* ğŸ”¥ í™œí™œ íƒ€ì˜¤ë¥´ëŠ” ë°°ê²½ */
    body {
      font-family: "Pretendard", sans-serif;
      background:
          linear-gradient(0deg, #000000 0%, #1a0505 15%, #330a0a 30%, #4d1010 45%, #661515 60%, #4d1010 75%, #1a0505 90%, #000000 100%);
      background-size: 100% 300%;
      animation: flameRoar 4s ease-in-out infinite;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      color: white;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    @keyframes flameRoar {
      0%, 100% { background-position: 0% 0%; }
      25% { background-position: 0% 40%; }
      50% { background-position: 0% 100%; }
      75% { background-position: 0% 60%; }
    }

    .fire-overlay {
      position: fixed;
      inset: 0;
      pointer-events: none;
      background:
          radial-gradient(ellipse at 50% 120%, rgba(255,69,0,0.6) 0%, rgba(255,140,0,0.4) 20%, transparent 60%),
          radial-gradient(ellipse at 20% 100%, rgba(255,100,0,0.5) 0%, transparent 50%),
          radial-gradient(ellipse at 80% 110%, rgba(255,120,0,0.55) 0%, transparent 55%),
          radial-gradient(ellipse at 35% 95%, rgba(255,200,0,0.4) 0%, transparent 45%),
          radial-gradient(ellipse at 65% 105%, rgba(255,180,0,0.45) 0%, transparent 50%);
      animation: fireWave 2s ease-in-out infinite;
    }

    @keyframes fireWave {
      0%, 100% {
        opacity: 0.8;
        transform: scale(1) translateY(0);
      }
      25% {
        opacity: 1;
        transform: scale(1.05) translateY(-15px);
      }
      50% {
        opacity: 0.9;
        transform: scale(1.1) translateY(-30px);
      }
      75% {
        opacity: 1;
        transform: scale(1.05) translateY(-15px);
      }
    }

    /* ğŸ”¥ ë¶ˆê½ƒ íŒŒí‹°í´ - ë” ë§ì´, ë” ë¹ ë¥´ê²Œ */
    .floating-particles {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
    }

    .floating-particle {
      position: absolute;
      width: 4px;
      height: 12px;
      background: linear-gradient(to top, #ff0000, #ff4500, #ffa500, transparent);
      border-radius: 50% 50% 0 0;
      box-shadow:
          0 0 15px #ff6600,
          0 0 30px rgba(255,100,0,0.5);
      animation: fireFloat 3s infinite ease-in;
      bottom: -10%;
      filter: blur(0.5px);
    }

    @keyframes fireFloat {
      0% {
        transform: translateY(0) translateX(0) scale(1) rotate(0deg);
        opacity: 1;
      }
      20% {
        transform: translateY(-20vh) translateX(15px) scale(1.3) rotate(10deg);
        opacity: 1;
      }
      40% {
        transform: translateY(-45vh) translateX(-10px) scale(1.1) rotate(-5deg);
        opacity: 0.9;
      }
      60% {
        transform: translateY(-70vh) translateX(25px) scale(0.9) rotate(15deg);
        opacity: 0.7;
      }
      80% {
        transform: translateY(-95vh) translateX(-15px) scale(0.6) rotate(-10deg);
        opacity: 0.4;
      }
      100% {
        transform: translateY(-120vh) translateX(10px) scale(0.3) rotate(20deg);
        opacity: 0;
      }
    }

    /* ğŸ”¥ í° ë¶ˆê½ƒ íš¨ê³¼ - ë” ê°•ë ¬í•˜ê²Œ */
    .fire-ember {
      position: absolute;
      width: 8px;
      height: 16px;
      background: linear-gradient(to top, #cc0000, #ff0000, #ff4500, #ff8800, #ffaa00);
      border-radius: 50% 50% 0 0;
      box-shadow:
          0 0 25px #ff4500,
          0 0 50px rgba(255,69,0,0.7),
          0 0 75px rgba(255,100,0,0.4);
      animation: emberFloat 4s infinite ease-out;
      bottom: -5%;
      filter: blur(0.8px);
    }

    @keyframes emberFloat {
      0% {
        transform: translateY(0) scale(1) rotate(0deg);
        opacity: 1;
      }
      30% {
        transform: translateY(-30vh) scale(1.4) rotate(20deg);
        opacity: 1;
      }
      60% {
        transform: translateY(-70vh) scale(1.2) rotate(-15deg);
        opacity: 0.8;
      }
      100% {
        transform: translateY(-120vh) scale(0.5) rotate(30deg);
        opacity: 0;
      }
    }

    /* ğŸ”¥ ë¶ˆê½ƒ í”ë“¤ë¦¼ íš¨ê³¼ */
    .fire-flicker {
      position: absolute;
      width: 5px;
      height: 10px;
      background: radial-gradient(ellipse at center, #ffaa00, #ff6600, transparent);
      border-radius: 50%;
      animation: flicker 0.15s infinite alternate;
      bottom: 0;
      opacity: 0.7;
    }

    @keyframes flicker {
      0% { transform: scaleY(1) scaleX(1); opacity: 0.7; }
      100% { transform: scaleY(1.2) scaleX(0.9); opacity: 0.9; }
    }

    /* ì»¨í…Œì´ë„ˆ - ë¶ˆê½ƒì— ê°ì‹¸ì¸ ëŠë‚Œ */
    .container {
      width: 650px;
      margin: 40px 0;
      padding: 35px;
      background: rgba(0,0,0,0.7);
      border-radius: 20px;
      border: 2px solid rgba(255,100,0,0.6);
      backdrop-filter: blur(20px);
      box-shadow:
          0 8px 32px rgba(255,69,0,0.6),
          inset 0 1px 0 rgba(255,150,0,0.4),
          0 0 60px rgba(255,69,0,0.4),
          0 0 100px rgba(255,100,0,0.2);
      position: relative;
      z-index: 10;
      animation: containerGlow 2s ease-in-out infinite alternate;
    }

    @keyframes containerGlow {
      0% {
        box-shadow:
            0 8px 32px rgba(255,69,0,0.6),
            inset 0 1px 0 rgba(255,150,0,0.4),
            0 0 60px rgba(255,69,0,0.4),
            0 0 100px rgba(255,100,0,0.2);
      }
      100% {
        box-shadow:
            0 8px 32px rgba(255,69,0,0.8),
            inset 0 1px 0 rgba(255,150,0,0.5),
            0 0 80px rgba(255,69,0,0.6),
            0 0 120px rgba(255,100,0,0.3);
      }
    }

    h1, h3 {
      margin-bottom: 20px;
      font-weight: 700;
    }

    /* íˆ¬í‘œ ì„ íƒ */
    .vote-option {
      position: relative;
      padding: 18px 20px;
      border-radius: 12px;
      margin-bottom: 18px;
      cursor: pointer;
      font-size: 18px;
      font-weight: 600;
      transition: 0.25s ease;
      overflow: hidden;
      border: 3px solid transparent;
    }

    .vote-option:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.25);
    }

    .opt-A { background: linear-gradient(90deg, #60a5fa, #3b82f6); }
    .opt-B { background: linear-gradient(90deg, #f87171, #ef4444); }

    /* ğŸŒ‹ ì„ íƒëœ ë²„íŠ¼ - ë§ˆê·¸ë§ˆ íš¨ê³¼ */
    .vote-option.selected {
      animation: magmaPulse 1.5s ease-in-out infinite;
    }

    .opt-A.selected {
      background: linear-gradient(90deg, #1e40af, #1e3a8a, #1e40af);
      background-size: 200% 100%;
      animation: magmaFlow 2s linear infinite, magmaPulse 1.5s ease-in-out infinite;
      border: 3px solid #60a5fa;
      box-shadow:
          0 0 30px rgba(59, 130, 246, 0.8),
          0 0 60px rgba(59, 130, 246, 0.5),
          inset 0 0 30px rgba(59, 130, 246, 0.3);
    }

    .opt-B.selected {
      background: linear-gradient(90deg, #991b1b, #7f1d1d, #991b1b);
      background-size: 200% 100%;
      animation: magmaFlow 2s linear infinite, magmaPulse 1.5s ease-in-out infinite;
      border: 3px solid #f87171;
      box-shadow:
          0 0 30px rgba(239, 68, 68, 0.8),
          0 0 60px rgba(239, 68, 68, 0.5),
          inset 0 0 30px rgba(239, 68, 68, 0.3);
    }

    @keyframes magmaFlow {
      0% { background-position: 0% 50%; }
      100% { background-position: 200% 50%; }
    }

    @keyframes magmaPulse {
      0%, 100% {
        transform: scale(1);
        filter: brightness(1);
      }
      50% {
        transform: scale(1.02);
        filter: brightness(1.2);
      }
    }

    /* ğŸŒ‹ ë§ˆê·¸ë§ˆ ë ˆì´ì–´ */
    .magma-layer {
      position: absolute;
      inset: 0;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
      border-radius: 12px;
      overflow: hidden;
    }

    .selected .magma-layer {
      opacity: 1;
    }

    .opt-A .magma-layer {
      background:
          radial-gradient(circle at 20% 50%, rgba(96, 165, 250, 0.6), transparent 40%),
          radial-gradient(circle at 80% 50%, rgba(59, 130, 246, 0.6), transparent 40%);
      animation: magmaBubble 3s ease-in-out infinite;
    }

    .opt-B .magma-layer {
      background:
          radial-gradient(circle at 20% 50%, rgba(248, 113, 113, 0.6), transparent 40%),
          radial-gradient(circle at 80% 50%, rgba(239, 68, 68, 0.6), transparent 40%);
      animation: magmaBubble 3s ease-in-out infinite;
    }

    @keyframes magmaBubble {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-10px) scale(1.1); }
    }

    /* ğŸ”¥ íˆ¬í‘œ í¼ì„¼íŠ¸ ì• ë‹ˆë©”ì´ì…˜ ë°” */
    .percent-bar {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      border-radius: 12px;
      opacity: 0.35;
      z-index: 1;
      width: 0%;
      transition: width 1.2s ease-out;
    }

    .percent-text {
      position: relative;
      z-index: 2;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }

    /* ğŸ’¥ í´ë¦­ ì„íŒ©íŠ¸ íŒŒí‹°í´ */
    .impact-particle {
      position: absolute;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      pointer-events: none;
      z-index: 100;
      animation: impactBurst 0.8s ease-out forwards;
    }

    @keyframes impactBurst {
      0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translate(var(--ix), var(--iy)) scale(0);
        opacity: 0;
      }
    }

    /* ğŸ’¥ ì¶©ê²©íŒŒ íš¨ê³¼ */
    .shockwave-ring {
      position: absolute;
      border-radius: 12px;
      border: 4px solid;
      pointer-events: none;
      animation: shockwaveExpand 0.6s ease-out forwards;
    }

    @keyframes shockwaveExpand {
      0% {
        width: 100%;
        height: 100%;
        opacity: 1;
        top: 0;
        left: 0;
      }
      100% {
        width: 150%;
        height: 150%;
        opacity: 0;
        top: -25%;
        left: -25%;
      }
    }

    .hidden-radio { display: none; }

    /* ì´ìœ  ì…ë ¥ */
    .reason-box input {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      font-size: 15px;
      border: 1px solid #d1d5db;
      margin-top: 10px;
    }

    button {
      margin-top: 25px;
      width: 100%;
      background: #2563eb;
      color: white;
      border: none;
      padding: 14px;
      border-radius: 10px;
      font-size: 17px;
      cursor: pointer;
      transition: 0.2s;
      font-weight: bold;
    }

    button:hover {
      background: #1e40af;
    }

    /* íˆ¬í‘œ ê²°ê³¼ ì„¹ì…˜ */
    .results-section {
      margin-top: 40px;
      padding-top: 30px;
      border-top: 1px solid rgba(255,255,255,0.2);
    }

    .results-section h3 {
      text-align: center;
      margin-bottom: 20px;
    }

    /* âœ¨ ëŒ“ê¸€ ì¹´ë“œ ìŠ¤íƒ€ì¼ ê°œì„  */
    .comment-item {
      background: rgba(255,255,255,0.15);
      padding: 18px 22px;
      border-radius: 16px;
      margin-bottom: 16px;
      display: flex;
      gap: 16px;
      box-shadow:
          0 4px 15px rgba(0,0,0,0.15),
          inset 0 1px 0 rgba(255,255,255,0.2);
      border: 1px solid rgba(255,255,255,0.25);
      transition: transform 0.2s ease;
    }

    .comment-item:hover {
      transform: translateY(-2px);
      box-shadow:
          0 6px 20px rgba(0,0,0,0.2),
          inset 0 1px 0 rgba(255,255,255,0.2);
    }

    .comment-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea, #764ba2);
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: bold;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }

    .comment-content { flex: 1; }

    .comment-choice {
      font-weight: bold;
      font-size: 16px;
      margin-bottom: 8px;
      padding: 4px 12px;
      display: inline-block;
      border-radius: 20px;
    }

    .choice-A {
      background: linear-gradient(90deg, #60a5fa, #3b82f6);
      color: white;
    }

    .choice-B {
      background: linear-gradient(90deg, #f87171, #ef4444);
      color: white;
    }

    .comment-text {
      color: #ffffff;
      font-size: 15px;
      line-height: 1.6;
      background: rgba(0,0,0,0.2);
      padding: 10px 14px;
      border-radius: 10px;
    }

    .comment-text:empty {
      display: none;
    }

    .no-results {
      text-align: center;
      color: #bbb;
      font-style: italic;
    }

    /* âœ¨ ë²„íŠ¼ í´ë¦­ íŒŒí‹°í´ - ë¶ˆê½ƒ ìŠ¤íƒ€ì¼ */
    .particle {
      position: absolute;
      width: 4px;
      height: 8px;
      background: linear-gradient(to top, #ff4500, #ffa500);
      border-radius: 50% 50% 0 0;
      pointer-events: none;
      box-shadow: 0 0 10px #ff6600;
      animation: particle-pop 600ms ease-out forwards;
    }

    @keyframes particle-pop {
      0% { opacity: 1; transform: translate(0,0) scale(1) rotate(0deg); }
      100% { opacity: 0; transform: translate(var(--x), var(--y)) scale(0.2) rotate(180deg); }
    }
  </style>
</head>

<body>
<div class="fire-overlay"></div>

<!-- ğŸ”¥ í™œí™œ íƒ€ì˜¤ë¥´ëŠ” ë¶ˆê½ƒ íŒŒí‹°í´ -->
<div class="floating-particles">
  <!-- ì‘ì€ ë¶ˆê½ƒë“¤ - ë§ì´ ì¶”ê°€ -->
  <div class="floating-particle" style="left: 3%; animation-delay: 0s; animation-duration: 2.5s;"></div>
  <div class="floating-particle" style="left: 8%; animation-delay: 0.3s; animation-duration: 2.8s;"></div>
  <div class="floating-particle" style="left: 13%; animation-delay: 0.6s; animation-duration: 2.3s;"></div>
  <div class="floating-particle" style="left: 18%; animation-delay: 0.9s; animation-duration: 2.7s;"></div>
  <div class="floating-particle" style="left: 23%; animation-delay: 0.2s; animation-duration: 2.6s;"></div>
  <div class="floating-particle" style="left: 28%; animation-delay: 0.5s; animation-duration: 2.4s;"></div>
  <div class="floating-particle" style="left: 33%; animation-delay: 0.8s; animation-duration: 2.9s;"></div>
  <div class="floating-particle" style="left: 38%; animation-delay: 0.1s; animation-duration: 2.5s;"></div>
  <div class="floating-particle" style="left: 43%; animation-delay: 0.4s; animation-duration: 2.8s;"></div>
  <div class="floating-particle" style="left: 48%; animation-delay: 0.7s; animation-duration: 2.6s;"></div>
  <div class="floating-particle" style="left: 53%; animation-delay: 0s; animation-duration: 2.7s;"></div>
  <div class="floating-particle" style="left: 58%; animation-delay: 0.3s; animation-duration: 2.4s;"></div>
  <div class="floating-particle" style="left: 63%; animation-delay: 0.6s; animation-duration: 2.9s;"></div>
  <div class="floating-particle" style="left: 68%; animation-delay: 0.9s; animation-duration: 2.5s;"></div>
  <div class="floating-particle" style="left: 73%; animation-delay: 0.2s; animation-duration: 2.8s;"></div>
  <div class="floating-particle" style="left: 78%; animation-delay: 0.5s; animation-duration: 2.3s;"></div>
  <div class="floating-particle" style="left: 83%; animation-delay: 0.8s; animation-duration: 2.7s;"></div>
  <div class="floating-particle" style="left: 88%; animation-delay: 0.1s; animation-duration: 2.6s;"></div>
  <div class="floating-particle" style="left: 93%; animation-delay: 0.4s; animation-duration: 2.4s;"></div>
  <div class="floating-particle" style="left: 97%; animation-delay: 0.7s; animation-duration: 2.9s;"></div>

  <!-- í° ë¶ˆì”¨ë“¤ - ë” ë§ì´ -->
  <div class="fire-ember" style="left: 10%; animation-delay: 0s; animation-duration: 3.5s;"></div>
  <div class="fire-ember" style="left: 25%; animation-delay: 1s; animation-duration: 4s;"></div>
  <div class="fire-ember" style="left: 40%; animation-delay: 0.5s; animation-duration: 3.8s;"></div>
  <div class="fire-ember" style="left: 55%; animation-delay: 1.5s; animation-duration: 3.6s;"></div>
  <div class="fire-ember" style="left: 70%; animation-delay: 0.8s; animation-duration: 4.2s;"></div>
  <div class="fire-ember" style="left: 85%; animation-delay: 1.2s; animation-duration: 3.7s;"></div>

  <!-- í”ë“¤ë¦¬ëŠ” ë¶ˆê½ƒ -->
  <div class="fire-flicker" style="left: 15%; bottom: 0; animation-delay: 0s;"></div>
  <div class="fire-flicker" style="left: 30%; bottom: 5%; animation-delay: 0.05s;"></div>
  <div class="fire-flicker" style="left: 45%; bottom: 0; animation-delay: 0.1s;"></div>
  <div class="fire-flicker" style="left: 60%; bottom: 3%; animation-delay: 0.03s;"></div>
  <div class="fire-flicker" style="left: 75%; bottom: 0; animation-delay: 0.08s;"></div>
  <div class="fire-flicker" style="left: 90%; bottom: 4%; animation-delay: 0.06s;"></div>
</div>

<div class="container">

  <h1 th:text="${question.title}"></h1>

  <form th:action="@{|/questions/${question.id}/answers|}" method="post">

    <!-- A -->
    <label>
      <input class="hidden-radio vote-radio" type="radio" name="answerText" value="A" required>
      <div class="vote-option opt-A vote-btn">
        <div class="magma-layer"></div>
        <div class="percent-bar barA"></div>
        <div class="percent-text">
          A â€” <span th:text="${question.optionA}"></span>
          (<span th:text="${percentA}"></span>% | <span th:text="${countA}"></span>í‘œ)
        </div>
      </div>
    </label>

    <!-- B -->
    <label>
      <input class="hidden-radio vote-radio" type="radio" name="answerText" value="B">
      <div class="vote-option opt-B vote-btn">
        <div class="magma-layer"></div>
        <div class="percent-bar barB"></div>
        <div class="percent-text">
          B â€” <span th:text="${question.optionB}"></span>
          (<span th:text="${percentB}"></span>% | <span th:text="${countB}"></span>í‘œ)
        </div>
      </div>
    </label>

    <div class="reason-box">
      <h3>ì´ìœ  (ì„ íƒ)</h3>
      <input type="text" name="content" placeholder="ì„ íƒí•œ ì´ìœ ê°€ ìˆë‹¤ë©´ ì ì–´ì£¼ì„¸ìš”">
    </div>

    <button type="submit">ğŸ”¥ íˆ¬í‘œí•˜ê¸° ğŸ”¥</button>
  </form>

  <!-- íˆ¬í‘œ ê²°ê³¼ -->
  <div class="results-section">
    <h3>íˆ¬í‘œ ê²°ê³¼</h3>

    <div th:each="answer : ${answers}" class="comment-item">
      <div class="comment-avatar" th:text="${answer.answerText}">A</div>
      <div class="comment-content">
        <div class="comment-choice" th:class="${answer.answerText == 'A'} ? 'comment-choice choice-A' : 'comment-choice choice-B'">
          <span th:if="${answer.answerText == 'A'}" th:text="${question.optionA}">ì˜µì…˜A</span>
          <span th:if="${answer.answerText == 'B'}" th:text="${question.optionB}">ì˜µì…˜B</span>
          ì„ íƒ
        </div>
        <div class="comment-text" th:if="${answer.content}" th:text="${answer.content}">
          ì´ìœ  ë‚´ìš©
        </div>
      </div>
    </div>

    <div class="no-results" th:if="${#lists.isEmpty(answers)}">
      ì•„ì§ íˆ¬í‘œê°€ ì—†ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ íˆ¬í‘œë¥¼ í•´ì£¼ì„¸ìš”!
    </div>
  </div>

</div>

<script>
  /* ğŸŒ‹ ë¼ë””ì˜¤ ì„ íƒì‹œ ë§ˆê·¸ë§ˆ íš¨ê³¼ */
  document.querySelectorAll('.vote-radio').forEach(radio => {
    radio.addEventListener('change', function() {
      // ëª¨ë“  ì„ íƒ í•´ì œ
      document.querySelectorAll('.vote-option').forEach(opt => {
        opt.classList.remove('selected');
        opt.style.boxShadow = 'none';
      });

      // ì„ íƒëœ ë²„íŠ¼ì— ë§ˆê·¸ë§ˆ íš¨ê³¼
      const selectedOption = this.parentElement.querySelector('.vote-option');
      selectedOption.classList.add('selected');
      selectedOption.style.boxShadow = '0 0 0 3px rgba(255,255,255,0.5)';

      // ğŸ’¥ ê°•ë ¥í•œ ì„íŒ©íŠ¸ íš¨ê³¼
      createImpact(selectedOption);
    });
  });

  /* ğŸ’¥ ì„íŒ©íŠ¸ íš¨ê³¼ ìƒì„± */
  function createImpact(element) {
    const rect = element.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;

    // ë²„íŠ¼ì´ Aì¸ì§€ Bì¸ì§€ í™•ì¸
    const isA = element.classList.contains('opt-A');
    const color = isA ? '#60a5fa' : '#f87171';

    // ì¶©ê²©íŒŒ ë§
    for (let i = 0; i < 3; i++) {
      setTimeout(() => {
        const ring = document.createElement('div');
        ring.className = 'shockwave-ring';
        ring.style.position = 'absolute';
        ring.style.borderColor = color;
        ring.style.top = '0';
        ring.style.left = '0';
        ring.style.width = '100%';
        ring.style.height = '100%';
        element.appendChild(ring);
        setTimeout(() => ring.remove(), 600);
      }, i * 100);
    }

    // íŒŒí‹°í´ í­ë°œ (40ê°œ)
    for (let i = 0; i < 40; i++) {
      const particle = document.createElement('div');
      particle.className = 'impact-particle';
      particle.style.background = color;
      particle.style.boxShadow = `0 0 15px ${color}`;
      particle.style.left = (rect.width / 2) + 'px';
      particle.style.top = (rect.height / 2) + 'px';

      const angle = (Math.PI * 2 * i) / 40;
      const distance = 80 + Math.random() * 60;
      const ix = Math.cos(angle) * distance;
      const iy = Math.sin(angle) * distance;

      particle.style.setProperty('--ix', ix + 'px');
      particle.style.setProperty('--iy', iy + 'px');

      element.appendChild(particle);
      setTimeout(() => particle.remove(), 800);
    }

    // í™”ë©´ í”ë“¤ë¦¼ íš¨ê³¼
    element.style.animation = 'none';
    setTimeout(() => {
      element.style.animation = '';
    }, 10);

    // ì§„ë™ íš¨ê³¼
    if (navigator.vibrate) {
      navigator.vibrate([100, 50, 100]);
    }
  }

  /* âœ¨ í´ë¦­ì‹œ íŒŒí‹°í´ í„°ì§ (ê¸°ì¡´ ìœ ì§€) */
  function explode(btn){
    for(let i=0;i<12;i++){
      const p = document.createElement('span');
      p.classList.add('particle');
      const angle = Math.random()*360;
      const dist = 40 + Math.random()*22;
      p.style.setProperty('--x', Math.cos(angle)*dist + 'px');
      p.style.setProperty('--y', Math.sin(angle)*dist + 'px');
      btn.appendChild(p);
      p.addEventListener('animationend',()=>p.remove());
    }
  }

  document.querySelectorAll('.vote-btn').forEach(btn=>{
    btn.addEventListener('click',()=>explode(btn));
  });

  /* âœ¨ íˆ¬í‘œ ê²°ê³¼ í¼ì„¼íŠ¸ê°€ ë¶€ë“œëŸ½ê²Œ ì°¨ì˜¤ë¥´ê¸° */
  window.addEventListener("DOMContentLoaded", () => {
    const percentA = parseFloat(document.querySelector("[th\\:text='${percentA}']")?.innerText || 0);
    const percentB = parseFloat(document.querySelector("[th\\:text='${percentB}']")?.innerText || 0);

    document.querySelector('.barA').style.width = percentA + "%";
    document.querySelector('.barB').style.width = percentB + "%";
  });
</script>

</body>
</html>